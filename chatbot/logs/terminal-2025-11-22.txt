C:\Users\hites\Documents\Lumina\chatbot\rag_store.py:15: LangChainDeprecationWarning: The class `HuggingFaceEmbeddings` was deprecated in LangChain 0.2.2 and will be removed in 1.0. An updated version of the class exists in the :class:`~langchain-huggingface package and should be used instead. To use it run `pip install -U :class:`~langchain-huggingface` and import as `from :class:`~langchain_huggingface import HuggingFaceEmbeddings``.
  self.embeddings = HuggingFaceEmbeddings(model_name="sentence-transformers/all-MiniLM-L6-v2")
✅ Saved vector store for diagnosis with 2 chunks
✅ Saved vector store for counselling with 3 chunks
✅ Saved vector store for wellness with 3 chunks
============================================================
Mental Health Chatbot API Server
Starting on port 5001
============================================================

Available endpoints:
  GET  /health - Health check
  POST /api/chat - Send message and get response
  GET  /api/session/<id>/summary - Get session summary
  GET  /api/session/<id>/history - Get conversation history
  DELETE /api/session/<id> - Delete session
  GET  /api/sessions - List all active sessions
============================================================
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.81.33.116:5001
Press CTRL+C to quit
[API] Created new session: 20251122_165726
[API] Processing message from user: user123
[API] Message: ok bye
[MODE] Gratitude detected — switching to WELLNESS.
[MODE] WELLNESS (confidence: 0.28)

[RAW JSON RESPONSE]: ```json
{
  "text": "Goodbye! Remember, I'm here whenever you need support or advice. Take care of yourself and have a great day!",
  "expression": "happy"
}
```

[PARSED] Text: Goodbye! Remember, I'm here whenever you need support or advice. Take care of yourself and have a gr...
[PARSED] Expression: happy

[2025-11-22 16:57:29] Mode: wellness | Risk: N/A
User: ok bye
127.0.0.1 - - [22/Nov/2025 16:57:29] "POST /api/chat HTTP/1.1" 200 -
[API] Using existing session: 20251122_165726
[API] Processing message from user: user123
[API] Message: listen
[MODE] COUNSELLING (confidence: 0.33)

[RAW JSON RESPONSE]: ```json
{
  "text": "I'm here to listen. What's on your mind? You can share as much or as little as you'd like.",
  "expression": "neutral"
}
```

[PARSED] Text: I'm here to listen. What's on your mind? You can share as much or as little as you'd like....
[PARSED] Expression: neutral

[2025-11-22 16:57:47] Mode: counselling | Risk: N/A
User: listen
127.0.0.1 - - [22/Nov/2025 16:57:47] "POST /api/chat HTTP/1.1" 200 -
[API] Using existing session: 20251122_165726
[API] Processing message from user: user123
[API] Message: do you
[MODE] DIAGNOSIS (confidence: 0.27)

[RAW JSON RESPONSE]: {
  "text": "I'm here to listen. What's on your mind? You can share as much or as little as you'd like.",
  "expression": "neutral"
}

[PARSED] Text: I'm here to listen. What's on your mind? You can share as much or as little as you'd like....
[PARSED] Expression: neutral
[MEMORY] Detected semantically repeated question, rephrasing to avoid redundancy.

[2025-11-22 16:57:58] Mode: diagnosis | Risk: N/A
User: do you
127.0.0.1 - - [22/Nov/2025 16:57:58] "POST /api/chat HTTP/1.1" 200 -
[API] Using existing session: 20251122_165726
[API] Processing message from user: user123
[API] Message: give 10 different exercises at home
[MODE] WELLNESS (confidence: 0.44)

[RAW JSON RESPONSE]: ```json
{
  "text": "Here are 10 different exercises you can do at home to support your physical and mental health:\n\n1. **Deep Breathing**: Inhale deeply through your nose for 4 seconds, hold for 4 seconds, and exhale through your mouth for 6 seconds. Repeat for 5-10 minutes.\n2. **Progressive Muscle Relaxation**: Tense and then relax each muscle group in your body, starting from your toes and working your way up to your head.\n3. **Yoga**: Follow along with a beginner yoga video online. Focus on poses like Child's Pose, Downward Dog, and Cat-Cow.\n4. **Bodyweight Squats**: Stand with feet shoulder-width apart and perform squats, keeping your back straight and knees behind toes.\n5. **Push-ups**: Start in a plank position and lower your body until your chest nearly touches the floor, then push back up.\n6. **Plank**: Hold a plank position for 20-60 seconds, engaging your core and keeping your body in a straight line.\n7. **Lunges**: Step forward with one foot, lowering your hips until both knees are bent at about a 90-degree angle, then push back up.\n8. **Glute Bridges**: Lie on your back with knees bent and feet flat on the floor, then lift your hips until your body forms a straight line from shoulders to knees.\n9. **Jumping Jacks**: Perform jumping jacks for 1-3 minutes to get your heart rate up.\n10. **Dancing**: Put on your favorite music and dance for 10-15 minutes to boost your mood and energy.",
  "expression": "happy"
}
```

[PARSED] Text: Here are 10 different exercises you can do at home to support your physical and mental health:

1. *...
[PARSED] Expression: happy

[2025-11-22 16:59:38] Mode: wellness | Risk: N/A
User: give 10 different exercises at home
127.0.0.1 - - [22/Nov/2025 16:59:38] "POST /api/chat HTTP/1.1" 200 -
[API] Using existing session: 20251122_165726
[API] Processing message from user: user123
[API] Message: hello
[MODE] WELLNESS (confidence: 0.42)

[RAW JSON RESPONSE]: ```json
{
  "text": "Hello! How are you feeling today? I'm here to chat about anything you'd like.",
  "expression": "neutral"
}
```

[PARSED] Text: Hello! How are you feeling today? I'm here to chat about anything you'd like....
[PARSED] Expression: neutral

[2025-11-22 17:00:24] Mode: wellness | Risk: N/A
User: hello
127.0.0.1 - - [22/Nov/2025 17:00:24] "POST /api/chat HTTP/1.1" 200 -
